generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id    String     @id @default(auto()) @map("_id") @db.ObjectId
  email String     @unique
  name  String?
  cart  CartItem[]
}

model CartItem {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  userId    String   @db.ObjectId
  user      User     @relation(fields: [userId], references: [id])
  productId String[] @db.ObjectId
  product   Product  @relation(fields: [productId], references: [id])
  date      DateTime @default(now())
}

model Category {
  id            String        @id @default(auto()) @map("_id") @db.ObjectId
  name          String        @unique
  subCategories SubCategory[]
  products      Product[]
}

model SubCategory {
  id               String           @id @default(auto()) @map("_id") @db.ObjectId
  name             String           @unique
  categoryId       String           @db.ObjectId
  category         Category         @relation(fields: [categoryId], references: [id])
  subSubCategories SubSubCategory[]
  products         Product[]
}

model SubSubCategory {
  id            String      @id @default(auto()) @map("_id") @db.ObjectId
  name          String      @unique
  subCategoryId String      @db.ObjectId
  subCategory   SubCategory @relation(fields: [subCategoryId], references: [id])
  products      Product[]
}

model Product {
  id               String          @id @default(auto()) @map("_id") @db.ObjectId
  name             String
  description      String?
  imageUrls        String[]
  regularPrice     Float
  discount         Float?
  reducedPrice     Float?
  launchedAt       DateTime        @default(now())
  cart             CartItem[]
  categoryId       String?         @db.ObjectId
  category         Category?       @relation(fields: [categoryId], references: [id])
  subCategoryId    String?         @db.ObjectId
  subCategory      SubCategory?    @relation(fields: [subCategoryId], references: [id])
  subSubCategoryId String?         @db.ObjectId
  subSubCategory   SubSubCategory? @relation(fields: [subSubCategoryId], references: [id])
}

// ui

model Carousel {
  id     String @id @default(auto()) @map("_id") @db.ObjectId
  imgUrl String
  alt    String
}
